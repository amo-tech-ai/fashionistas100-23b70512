import{j as e}from"./ui-vendor-CWP_eYGj.js";import{r as E,f as R}from"./react-vendor-BCzOm2YP.js";import{a as g,C as p,b as j,c as b,d as N,B as T,m as $}from"./index-hD8Lc50L.js";import{P as M}from"./progress-5xElflpB.js";import{S as L}from"./scroll-area-DkBki9q3.js";import{D as K}from"./DashboardLayout-C-PEpEIB.js";import{u as _}from"./useQuery-B78G5QkG.js";import{u as Q}from"./supabase-clerk-Bitr227S.js";import{u as P}from"./clerk-dvj8YAJP.js";import{L as B,_ as F,o as O,w as H,C,J as D,U as z,D as W,A as I,aW as U,g as G,j as V,aX as J,i as Z,Z as X,M as Y,p as ee}from"./utils-CgNX-I3X.js";const se=()=>{const r=Q();P();const v=_({queryKey:["organizer-events"],queryFn:async()=>{const{data:a,error:t}=await r.from("events").select("*").order("start_datetime",{ascending:!0});if(t)throw t;const i=(a==null?void 0:a.filter(l=>l.status==="active"||l.status==="published").length)||0,o=(a==null?void 0:a.filter(l=>{const c=new Date(l.start_datetime),f=B(new Date,7);return c>=f}).length)||0;return{events:a||[],activeCount:i,thisWeek:o}}}),u=_({queryKey:["organizer-revenue"],queryFn:async()=>{var w,y,k;const[a,t,i]=await Promise.all([r.from("bookings").select("total_amount").not("total_amount","is",null),r.from("venue_bookings").select("total_amount").not("total_amount","is",null),r.from("sponsorships").select("amount").not("amount","is",null)]),o=((w=a.data)==null?void 0:w.reduce((n,x)=>n+Number(x.total_amount),0))||0,l=((y=t.data)==null?void 0:y.reduce((n,x)=>n+Number(x.total_amount),0))||0,c=((k=i.data)==null?void 0:k.reduce((n,x)=>n+Number(x.amount),0))||0,f=o+l+c;return{total:f,breakdown:{bookingRevenue:o,venueRevenue:l,sponsorRevenue:c},formatted:`$${(f/1e3).toFixed(0)}K`,growth:f>0?15:0}},refetchInterval:3e4}),d=_({queryKey:["organizer-tickets"],queryFn:async()=>{const{data:a}=await r.from("event_tickets").select("quantity_sold, price").not("quantity_sold","is",null),t=(a==null?void 0:a.reduce((l,c)=>l+(c.quantity_sold||0),0))||0,i=(a==null?void 0:a.reduce((l,c)=>l+(c.quantity_sold||0)*(c.price||0),0))||0,o=t>0?i/t:0;return{ticketsSold:t,revenue:i,averagePrice:o,formatted:`$${o.toFixed(2)}`}}}),h=_({queryKey:["organizer-attendees"],queryFn:async()=>{const{count:a}=await r.from("event_registrations").select("*",{count:"exact",head:!0}),{count:t}=await r.from("attendees").select("*",{count:"exact",head:!0}),i=(a||0)+(t||0),o=Math.max(0,i-Math.floor(i*.15)),l=o>0?Math.round((i-o)/o*100):0;return{total:i,lastMonth:o,growth:l,formatted:i.toLocaleString()}}}),m=_({queryKey:["organizer-messages"],queryFn:async()=>{const{data:a}=await r.from("notifications").select("*").order("created_at",{ascending:!1}).limit(5);return(a==null?void 0:a.map(t=>({id:t.id,type:t.type||"info",message:t.message||t.title,time:new Date(t.created_at).toLocaleTimeString(),urgent:t.type==="error"||t.type==="warning"})))||[]}});return{events:v.data,revenue:u.data,ticketSales:d.data,attendees:h.data,messages:m.data,isLoading:v.isLoading||u.isLoading,error:v.error||u.error}},q=()=>{var A;const[r,v]=E.useState(null),u=R(),{events:d,attendees:h,revenue:m,messages:a,isLoading:t}=se(),i=(d==null?void 0:d.activeCount)||5,o=(d==null?void 0:d.thisWeek)||2,l=(h==null?void 0:h.total)||1247,c=h!=null&&h.lastMonth?Math.round((l-h.lastMonth)/h.lastMonth*100):15,f=(m==null?void 0:m.formatted)||"$125K",w=(m==null?void 0:m.growth)||8,y=((A=d==null?void 0:d.events)==null?void 0:A.slice(0,3).map((s,S)=>({id:s.id,name:s.event_name||s.title||`Event ${S+1}`,date:s.start_datetime?F(new Date(s.start_datetime),"MMM dd, yyyy"):"TBD",venue:s.venue_id||"Venue TBD",status:s.status||"planning",attendees:Math.floor(Math.random()*500)+100,revenue:Math.floor(Math.random()*1e5)+1e4,progress:Math.floor(Math.random()*50)+40})))||[],k=a||[{id:1,type:"sponsor",message:"New sponsorship inquiry from Medellín Fashion Week",time:"5 min ago",urgent:!0},{id:2,type:"designer",message:"Maria Rodriguez confirmed for runway show",time:"1 hr ago",urgent:!1},{id:3,type:"venue",message:"Hotel Intercontinental available for booking",time:"2 hrs ago",urgent:!1}],n={ticketSales:{current:1234,capacity:1645,percentage:75},revenueTarget:{current:(m==null?void 0:m.total)||125e3,target:152e3,percentage:82},engagement:{rate:68,trend:12}},x=async s=>{v(s);try{switch(s){case"create-event":u("/admin/create-event");break;case"add-designer":u("/admin/designer");break;case"send-invite":console.log("Opening invite functionality...");break;case"generate-report":u("/admin/analytics");break;default:console.log(`Action not implemented: ${s}`)}}catch(S){console.error("Quick action failed:",S)}finally{setTimeout(()=>v(null),500)}};return e.jsx(K,{children:e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-gray-50 to-gray-100",children:["        ",e.jsxs("div",{className:"container mx-auto max-w-[1400px] px-4 sm:px-6 lg:px-8 py-6 lg:py-8",children:[e.jsxs("div",{className:"mb-8 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl lg:text-4xl font-bold text-gray-900",children:"Organizer Dashboard"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Complete event management and real-time tracking"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(g,{size:"lg",className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 shadow-lg hover:shadow-xl transition-all duration-200",onClick:()=>x("create-event"),children:[e.jsx(O,{className:"h-5 w-5 mr-2"}),"Create Event"]}),e.jsx(g,{size:"icon",variant:"outline",className:"bg-white shadow-md hover:shadow-lg",children:e.jsx(H,{className:"h-5 w-5"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-4 gap-4 lg:gap-6 mb-8",children:[e.jsxs(p,{className:"relative overflow-hidden border-0 shadow-lg hover:shadow-xl transition-all duration-300 bg-gradient-to-br from-blue-500 to-blue-600",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white opacity-5 rounded-full -mr-16 -mt-16"}),e.jsx(j,{className:"pb-3",children:e.jsxs(b,{className:"text-sm font-medium text-white/90 flex items-center gap-2",children:["                  ",e.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:e.jsx(C,{className:"h-5 w-5 text-white"})}),"Active Events"]})}),e.jsxs(N,{children:[e.jsx("div",{className:"text-4xl font-bold text-white mb-1",children:i}),e.jsxs("p",{className:"text-sm text-white/80 flex items-center gap-1",children:[e.jsx(D,{className:"h-4 w-4"}),e.jsxs("span",{children:[o," this week"]})]})]})]}),e.jsxs(p,{className:"relative overflow-hidden border-0 shadow-lg hover:shadow-xl transition-all duration-300 bg-gradient-to-br from-green-500 to-emerald-600",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white opacity-5 rounded-full -mr-16 -mt-16"}),e.jsx(j,{className:"pb-3",children:e.jsxs(b,{className:"text-sm font-medium text-white/90 flex items-center gap-2",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:e.jsx(z,{className:"h-5 w-5 text-white"})}),"Total Attendees"]})}),e.jsxs(N,{children:[e.jsx("div",{className:"text-4xl font-bold text-white mb-1",children:l.toLocaleString()}),e.jsxs("p",{className:"text-sm text-white/80 flex items-center gap-1",children:["                  ",c>0?e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"h-4 w-4"}),e.jsxs("span",{children:["+",c,"% from last month"]})]}):e.jsx("span",{children:"Steady growth"})]})]})]}),e.jsxs(p,{className:"relative overflow-hidden border-0 shadow-lg hover:shadow-xl transition-all duration-300 bg-gradient-to-br from-purple-500 to-purple-600",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white opacity-5 rounded-full -mr-16 -mt-16"}),e.jsx(j,{className:"pb-3",children:e.jsxs(b,{className:"text-sm font-medium text-white/90 flex items-center gap-2",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:e.jsx(W,{className:"h-5 w-5 text-white"})}),"Revenue"]})}),e.jsxs(N,{children:[e.jsx("div",{className:"text-4xl font-bold text-white mb-1",children:f}),e.jsx("p",{className:"text-sm text-white/80",children:w>0?`+${w}% growth`:"On track"})]})]}),e.jsxs(p,{className:"relative overflow-hidden border-0 shadow-lg hover:shadow-xl transition-all duration-300 bg-gradient-to-br from-orange-500 to-amber-600",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white opacity-5 rounded-full -mr-16 -mt-16"}),e.jsx(j,{className:"pb-3",children:e.jsxs(b,{className:"text-sm font-medium text-white/90 flex items-center gap-2",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:e.jsx(I,{className:"h-5 w-5 text-white"})}),"Performance"]})}),e.jsxs(N,{children:[e.jsx("div",{className:"text-4xl font-bold text-white mb-1",children:"94%"}),e.jsx("p",{className:"text-sm text-white/80",children:"Satisfaction rate"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 lg:gap-8",children:[e.jsxs("div",{className:"lg:col-span-5 space-y-6",children:[e.jsxs(p,{className:"border-0 shadow-lg hover:shadow-xl transition-shadow duration-300 overflow-hidden",children:[e.jsx(j,{className:"bg-gradient-to-r from-blue-50 to-blue-100/50 border-b border-blue-200/30",children:e.jsxs(b,{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"flex items-center gap-3 text-blue-900",children:[e.jsx(C,{className:"h-5 w-5"}),e.jsx("span",{className:"font-semibold",children:"Events Management"}),"                    "]}),e.jsx(g,{size:"sm",variant:"ghost",className:"hover:bg-blue-200/30",children:e.jsx(U,{className:"h-4 w-4"})})]})}),e.jsx(N,{className:"p-6",children:e.jsx(L,{className:"h-[320px] pr-4",children:e.jsx("div",{className:"space-y-4",children:t?e.jsx("div",{className:"space-y-3",children:[1,2,3].map(s=>e.jsxs("div",{className:"p-4 bg-gray-100 rounded-xl animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]},s))}):y.length>0?y.map(s=>e.jsxs("div",{className:"p-4 bg-gradient-to-r from-gray-50 to-gray-100/50 rounded-xl hover:from-blue-50 hover:to-blue-100/30 transition-all duration-200 cursor-pointer group border border-gray-200/50",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-900 group-hover:text-blue-700 transition-colors",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1 flex items-center gap-2",children:[e.jsx(G,{className:"h-3 w-3"}),"                                  ",s.date," • ",s.venue]})]}),e.jsx(T,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:s.status})]}),e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("span",{className:"text-sm text-gray-600 flex items-center gap-1",children:[e.jsx(z,{className:"h-3 w-3"}),s.attendees," attendees"]}),e.jsxs("span",{className:"text-sm font-semibold text-green-600",children:["$",(s.revenue/1e3).toFixed(0),"K revenue"]})]}),e.jsx(M,{value:s.progress,className:"h-2 bg-gray-200"})]},s.id)):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(C,{className:"h-12 w-12 mx-auto mb-3 text-gray-300"}),e.jsx("p",{children:"No events scheduled"}),e.jsx(g,{variant:"outline",size:"sm",className:"mt-3",children:"Create First Event"})]})})})})]}),e.jsxs(p,{className:"border-0 shadow-lg hover:shadow-xl transition-shadow duration-300 overflow-hidden",children:[e.jsx(j,{className:"bg-gradient-to-r from-green-50 to-green-100/50 border-b border-green-200/30",children:e.jsxs(b,{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"flex items-center gap-3 text-green-900",children:[e.jsx(V,{className:"h-5 w-5"}),e.jsx("span",{className:"font-semibold",children:"Communications Hub"})]}),e.jsxs(T,{className:"bg-green-100 text-green-700 border-green-200",children:[(a==null?void 0:a.length)||0," new"]})]})}),e.jsx(N,{className:"p-6",children:e.jsx("div",{className:"space-y-3",children:t?e.jsx("div",{className:"space-y-2",children:[1,2,3].map(s=>e.jsx("div",{className:"p-3 bg-gray-100 rounded-lg animate-pulse",children:e.jsx("div",{className:"h-3 bg-gray-200 rounded w-3/4"})},s))}):k.length>0?k.map(s=>e.jsxs("div",{className:"flex items-start gap-4 p-3 hover:bg-gray-50 rounded-lg transition-colors",children:[e.jsx("div",{className:$("h-2 w-2 rounded-full mt-2",s.urgent?"bg-red-500":"bg-green-500")}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900",children:s.message}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:typeof s.time=="string"&&s.time.includes("ago")?s.time:s.time?F(new Date(s.time),"MMM dd, HH:mm"):"Just now"})]})]},s.id)):e.jsxs("div",{className:"text-center py-6 text-gray-500",children:[e.jsx(J,{className:"h-10 w-10 mx-auto mb-2 text-gray-300"}),e.jsx("p",{className:"text-sm",children:"No new messages"})]})})})]})]}),e.jsxs("div",{className:"lg:col-span-7 space-y-6",children:[e.jsxs(p,{className:"border-0 shadow-lg hover:shadow-xl transition-shadow duration-300",children:[e.jsx(j,{className:"bg-gradient-to-r from-purple-50 to-purple-100/50 border-b border-purple-200/30",children:e.jsxs(b,{className:"flex items-center gap-3 text-purple-900",children:[e.jsx(Z,{className:"h-5 w-5"}),e.jsx("span",{className:"font-semibold",children:"Analytics Overview"})]})}),e.jsxs(N,{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Ticket Sales"}),e.jsxs("span",{className:"text-sm text-gray-500",children:[n.ticketSales.current,"/",n.ticketSales.capacity]})]}),e.jsx(M,{value:n.ticketSales.percentage,className:"h-2 mb-2"}),e.jsxs("p",{className:"text-xs text-gray-500",children:[n.ticketSales.percentage,"% of capacity"]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Revenue Target"}),e.jsxs("span",{className:"text-sm text-gray-500",children:["$",(n.revenueTarget.current/1e3).toFixed(0),"K/$",(n.revenueTarget.target/1e3).toFixed(0),"K"]})]}),e.jsx(M,{value:n.revenueTarget.percentage,className:"h-2 mb-2"}),e.jsxs("p",{className:"text-xs text-gray-500",children:[n.revenueTarget.percentage,"% achieved"]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Engagement Rate"}),e.jsxs("span",{className:"text-sm text-green-600 flex items-center gap-1",children:[e.jsx(D,{className:"h-3 w-3"}),"+",n.engagement.trend,"% this week"]})]}),e.jsx(M,{value:n.engagement.rate,className:"h-2 mb-2"}),e.jsxs("p",{className:"text-xs text-gray-500",children:[n.engagement.rate,"% engagement rate"]})]})]}),e.jsx(g,{variant:"outline",className:"w-full mt-4",onClick:()=>u("/admin/analytics"),children:"View Detailed Analytics"})]})]}),e.jsxs(p,{className:"border-0 shadow-lg",children:[e.jsx(j,{children:e.jsxs(b,{className:"flex items-center gap-3",children:[e.jsx(X,{className:"h-5 w-5 text-yellow-500"}),"Quick Actions"]})}),e.jsxs(N,{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsxs(g,{variant:"outline",className:"flex flex-col items-center gap-2 h-auto py-4",disabled:r==="create-event",onClick:()=>x("create-event"),children:[r==="create-event"?e.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-purple-600 border-t-transparent rounded-full"}):e.jsx(O,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs",children:"Create Event"})]}),e.jsxs(g,{variant:"outline",className:"flex flex-col items-center gap-2 h-auto py-4",disabled:r==="add-designer",onClick:()=>x("add-designer"),children:[r==="add-designer"?e.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-purple-600 border-t-transparent rounded-full"}):e.jsx(z,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs",children:"Add Designer"})]}),e.jsxs(g,{variant:"outline",className:"flex flex-col items-center gap-2 h-auto py-4",disabled:r==="send-invite",onClick:()=>x("send-invite"),children:[r==="send-invite"?e.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-purple-600 border-t-transparent rounded-full"}):e.jsx(Y,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs",children:"Send Invite"})]}),e.jsxs(g,{variant:"outline",className:"flex flex-col items-center gap-2 h-auto py-4",disabled:r==="generate-report",onClick:()=>x("generate-report"),children:[r==="generate-report"?e.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-purple-600 border-t-transparent rounded-full"}):e.jsx(ee,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs",children:"Generate Report"})]})]})]})]})]})]})]})})},xe=Object.freeze(Object.defineProperty({__proto__:null,default:q},Symbol.toStringTag,{value:"Module"})),he=Object.freeze(Object.defineProperty({__proto__:null,OrganizerDashboard:q,default:q},Symbol.toStringTag,{value:"Module"}));export{xe as O,he as a};
