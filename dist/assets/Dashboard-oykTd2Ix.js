import{j as e}from"./ui-vendor-CWP_eYGj.js";import{r as n}from"./react-vendor-BCzOm2YP.js";import{s as f,u as Z,a as N,I as z,S as O,e as B,f as G,g as I,h as o,C,d as A,b as q,c as R,B as L}from"./index-D8i8dsVp.js";import{T as oe,a as me,b as $,c as H}from"./tabs-CPONgu8L.js";import{u as he}from"./clerk-dvj8YAJP.js";import{L as P}from"./label-F-9tIvCA.js";import{T as ue}from"./textarea-CkkEAN6F.js";import{D as ee,a as xe,b as se,c as te,d as ae}from"./dialog-CPpwDaNT.js";import{o as je,S as re,C as W,f as fe,q as ge,ax as ve,a1 as pe,E as ce,V as Ne,z as de,j as Q,M as we,e as ye,h as ne,i as be,P as ie,U as le,T as J,A as _e}from"./utils-CgNX-I3X.js";import"./supabase-Bc-83CNV.js";const X=()=>{const[g,w]=n.useState(!1),[m,y]=n.useState(!0),{user:t}=he();return n.useEffect(()=>{(async()=>{var S,u,k;if(window.location.hostname==="localhost"&&window.location.search.includes("dev=true")){console.log("ðŸ”§ Development mode: Granting admin access"),w(!0),y(!1);return}const b=["admin@fashionistas.one","emergency@fashionistas.one","sk@example.com","test@example.com","demo@fashionistas.one"];if(window.location.hostname==="fashionistas.one"&&(window.location.search.includes("emergency=true")||window.location.search.includes("admin=true"))){console.log("ðŸš¨ PRODUCTION EMERGENCY: Admin access granted for testing"),w(!0),y(!1);return}if((S=t==null?void 0:t.primaryEmailAddress)!=null&&S.emailAddress&&b.includes(t.primaryEmailAddress.emailAddress)){console.log("ðŸš¨ Emergency admin access granted for:",t.primaryEmailAddress.emailAddress),w(!0),y(!1);return}if(!t){w(!1),y(!1);return}try{if(((u=t.publicMetadata)==null?void 0:u.role)==="admin"||((k=t.publicMetadata)==null?void 0:k.isAdmin)===!0)w(!0);else{const{data:D,error:c}=await f.from("user_roles").select("role").eq("user_id",t.id).eq("role","admin").maybeSingle();c?(console.error("Error checking admin status:",c),w(!1)):w(!!D)}}catch(x){console.error("Error checking admin status:",x),w(!1)}finally{y(!1)}})()},[t]),{isAdmin:g,loading:m,getAdminStats:async()=>{if(!g)return null;try{const[l,j,b,h,S]=await Promise.all([f.from("events").select("id",{count:"exact",head:!0}),f.from("designer_profiles").select("id",{count:"exact",head:!0}),f.from("contact_forms").select("id",{count:"exact",head:!0}),f.from("profiles").select("id",{count:"exact",head:!0}),f.from("audit_logs").select("*").order("created_at",{ascending:!1}).limit(10)]);return{totalEvents:l.count||0,totalDesigners:j.count||0,totalContacts:b.count||0,totalUsers:h.count||0,recentActivity:S.data||[]}}catch(l){return console.error("Error fetching admin stats:",l),null}},logAdminAction:async(l,j,b,h,S)=>{if(!(!g||!t))try{await f.from("audit_logs").insert({user_id:t.id,action:l,table_name:j,record_id:b,old_values:h,new_values:S})}catch(u){console.error("Error logging admin action:",u)}}}},Ce=()=>{const[g,w]=n.useState([]),[m,y]=n.useState([]),[t,T]=n.useState(!0),[v,l]=n.useState(null),[j,b]=n.useState(!1),[h,S]=n.useState(""),[u,k]=n.useState("all"),{toast:x}=Z(),{logAdminAction:D}=X(),[c,_]=n.useState({event_name:"",description:"",status:"draft",start_datetime:"",end_datetime:"",venue_id:""});n.useEffect(()=>{U(),V()},[]);const U=async()=>{T(!0);try{const{data:s,error:i}=await f.from("events").select("*").order("created_at",{ascending:!1});if(i)throw i;w(s||[])}catch(s){x({title:"Error fetching events",description:s.message,variant:"destructive"})}finally{T(!1)}},V=async()=>{try{const{data:s,error:i}=await f.from("venues").select("id, venue_name, city, address").eq("status","active").order("venue_name");if(i)throw i;y(s||[])}catch(s){console.error("Error fetching venues:",s)}},r=async()=>{var s;try{const{data:i,error:M}=await f.from("events").insert([{...c,organizer_id:(s=(await f.auth.getUser()).data.user)==null?void 0:s.id}]).select().single();if(M)throw M;await D("create","events",i.id,null,i),x({title:"Event created",description:"The event has been created successfully."}),b(!1),E(),U()}catch(i){x({title:"Error creating event",description:i.message,variant:"destructive"})}},d=async()=>{if(v)try{const{data:s,error:i}=await f.from("events").update(c).eq("id",v.id).select().single();if(i)throw i;await D("update","events",v.id,v,s),x({title:"Event updated",description:"The event has been updated successfully."}),b(!1),l(null),E(),U()}catch(s){x({title:"Error updating event",description:s.message,variant:"destructive"})}},a=async s=>{if(confirm("Are you sure you want to delete this event?"))try{const i=g.find(Y=>Y.id===s),{error:M}=await f.from("events").delete().eq("id",s);if(M)throw M;await D("delete","events",s,i,null),x({title:"Event deleted",description:"The event has been deleted successfully."}),U()}catch(i){x({title:"Error deleting event",description:i.message,variant:"destructive"})}},p=s=>{l(s),_({event_name:s.event_name,description:s.description||"",status:s.status,start_datetime:new Date(s.start_datetime).toISOString().slice(0,16),end_datetime:new Date(s.end_datetime).toISOString().slice(0,16),venue_id:s.venue_id||""}),b(!0)},E=()=>{_({event_name:"",description:"",status:"draft",start_datetime:"",end_datetime:"",venue_id:""})},F=g.filter(s=>{var Y;const i=s.event_name.toLowerCase().includes(h.toLowerCase())||((Y=s.description)==null?void 0:Y.toLowerCase().includes(h.toLowerCase())),M=u==="all"||s.status===u;return i&&M}),K=s=>{switch(s){case"published":return"default";case"draft":return"secondary";case"cancelled":return"destructive";default:return"outline"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-start md:items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Event Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Create and manage fashion events"})]}),e.jsxs(ee,{open:j,onOpenChange:b,children:[e.jsx(xe,{asChild:!0,children:e.jsxs(N,{onClick:()=>{E(),l(null)},children:[e.jsx(je,{className:"w-4 h-4 mr-2"}),"Create Event"]})}),e.jsxs(se,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(te,{children:e.jsx(ae,{children:v?"Edit Event":"Create New Event"})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(P,{htmlFor:"event_name",children:"Event Name"}),e.jsx(z,{id:"event_name",value:c.event_name,onChange:s=>_({...c,event_name:s.target.value}),placeholder:"Enter event name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(P,{htmlFor:"description",children:"Description"}),e.jsx(ue,{id:"description",value:c.description,onChange:s=>_({...c,description:s.target.value}),placeholder:"Enter event description",rows:4})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(P,{htmlFor:"start_datetime",children:"Start Date & Time"}),e.jsx(z,{id:"start_datetime",type:"datetime-local",value:c.start_datetime,onChange:s=>_({...c,start_datetime:s.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(P,{htmlFor:"end_datetime",children:"End Date & Time"}),e.jsx(z,{id:"end_datetime",type:"datetime-local",value:c.end_datetime,onChange:s=>_({...c,end_datetime:s.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(P,{htmlFor:"venue",children:"Venue"}),e.jsxs(O,{value:c.venue_id,onValueChange:s=>_({...c,venue_id:s}),children:[e.jsx(B,{children:e.jsx(G,{placeholder:"Select venue"})}),e.jsx(I,{children:m.map(s=>e.jsxs(o,{value:s.id,children:[s.venue_name," - ",s.city]},s.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(P,{htmlFor:"status",children:"Status"}),e.jsxs(O,{value:c.status,onValueChange:s=>_({...c,status:s}),children:[e.jsx(B,{children:e.jsx(G,{})}),e.jsxs(I,{children:[e.jsx(o,{value:"draft",children:"Draft"}),e.jsx(o,{value:"published",children:"Published"}),e.jsx(o,{value:"cancelled",children:"Cancelled"})]})]})]})]}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsx(N,{onClick:v?d:r,className:"flex-1",children:v?"Update Event":"Create Event"}),e.jsx(N,{variant:"outline",onClick:()=>b(!1),className:"flex-1",children:"Cancel"})]})]})]})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(re,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(z,{placeholder:"Search events...",value:h,onChange:s=>S(s.target.value),className:"pl-10"})]}),e.jsxs(O,{value:u,onValueChange:k,children:[e.jsx(B,{className:"w-full md:w-48",children:e.jsx(G,{placeholder:"Filter by status"})}),e.jsxs(I,{children:[e.jsx(o,{value:"all",children:"All Status"}),e.jsx(o,{value:"draft",children:"Draft"}),e.jsx(o,{value:"published",children:"Published"}),e.jsx(o,{value:"cancelled",children:"Cancelled"})]})]})]}),e.jsx("div",{className:"grid gap-4",children:t?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading events..."})]}):F.length===0?e.jsx(C,{children:e.jsxs(A,{className:"text-center py-8",children:[e.jsx(W,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No events found"}),e.jsx("p",{className:"text-muted-foreground",children:h||u!=="all"?"No events match your current filters.":"Get started by creating your first event."})]})}):F.map(s=>{var i;return e.jsxs(C,{children:[e.jsx(q,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(R,{className:"text-lg",children:s.event_name}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(W,{className:"w-4 h-4"}),new Date(s.start_datetime).toLocaleDateString()]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(fe,{className:"w-4 h-4"}),((i=m.find(M=>M.id===s.venue_id))==null?void 0:i.venue_name)||"No venue"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{variant:K(s.status),children:s.status.charAt(0).toUpperCase()+s.status.slice(1)}),e.jsx(N,{variant:"outline",size:"sm",onClick:()=>p(s),children:e.jsx(ge,{className:"w-4 h-4"})}),e.jsx(N,{variant:"outline",size:"sm",onClick:()=>a(s.id),children:e.jsx(ve,{className:"w-4 h-4"})})]})]})}),s.description&&e.jsx(A,{children:e.jsx("p",{className:"text-muted-foreground line-clamp-2",children:s.description})})]},s.id)})})]})},Se=()=>{var V;const[g,w]=n.useState([]),[m,y]=n.useState(!0),[t,T]=n.useState(null),[v,l]=n.useState(!1),[j,b]=n.useState(""),[h,S]=n.useState("all"),{toast:u}=Z(),{logAdminAction:k}=X();n.useEffect(()=>{x()},[]);const x=async()=>{y(!0);try{const{data:r,error:d}=await f.from("designer_profiles").select("*").order("created_at",{ascending:!1});if(d)throw d;w(r||[])}catch(r){u({title:"Error fetching designers",description:r.message,variant:"destructive"})}finally{y(!1)}},D=async(r,d)=>{try{const a=g.find(F=>F.id===r),{data:p,error:E}=await f.from("designer_profiles").update({is_verified:d}).eq("id",r).select().single();if(E)throw E;await k(d?"verify":"unverify","designer_profiles",r,a,p),u({title:`Designer ${d?"verified":"unverified"}`,description:`The designer has been ${d?"verified":"unverified"} successfully.`}),x()}catch(a){u({title:"Error updating designer",description:a.message,variant:"destructive"})}},c=async r=>{if(confirm("Are you sure you want to delete this designer profile?"))try{const d=g.find(p=>p.id===r),{error:a}=await f.from("designer_profiles").delete().eq("id",r);if(a)throw a;await k("delete","designer_profiles",r,d,null),u({title:"Designer deleted",description:"The designer profile has been deleted successfully."}),x()}catch(d){u({title:"Error deleting designer",description:d.message,variant:"destructive"})}},_=r=>{T(r),l(!0)},U=g.filter(r=>{var p;const d=r.brand_name.toLowerCase().includes(j.toLowerCase())||((p=r.bio)==null?void 0:p.toLowerCase().includes(j.toLowerCase())),a=h==="all"||h==="verified"&&r.is_verified||h==="unverified"&&!r.is_verified;return d&&a});return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex flex-col md:flex-row gap-4 items-start md:items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Designer Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Review and manage fashion designers"})]})}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(re,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(z,{placeholder:"Search designers...",value:j,onChange:r=>b(r.target.value),className:"pl-10"})]}),e.jsxs(O,{value:h,onValueChange:S,children:[e.jsx(B,{className:"w-full md:w-48",children:e.jsx(G,{placeholder:"Filter by status"})}),e.jsxs(I,{children:[e.jsx(o,{value:"all",children:"All Designers"}),e.jsx(o,{value:"verified",children:"Verified"}),e.jsx(o,{value:"unverified",children:"Unverified"})]})]})]}),e.jsx("div",{className:"grid gap-4",children:m?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading designers..."})]}):U.length===0?e.jsx(C,{children:e.jsxs(A,{className:"text-center py-8",children:[e.jsx(pe,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No designers found"}),e.jsx("p",{className:"text-muted-foreground",children:j||h!=="all"?"No designers match your current filters.":"No designer profiles have been created yet."})]})}):U.map(r=>{var d;return e.jsx(C,{children:e.jsx(q,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(R,{className:"text-lg",children:r.brand_name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["@",r.brand_slug]}),r.bio&&e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:r.bio}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(L,{variant:r.is_verified?"default":"secondary",children:r.is_verified?"Verified":"Unverified"}),r.website_url&&e.jsx(L,{variant:"outline",children:"Has Website"}),((d=r.portfolio_urls)==null?void 0:d.length)>0&&e.jsxs(L,{variant:"outline",children:[r.portfolio_urls.length," Portfolio Items"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{variant:"outline",size:"sm",onClick:()=>_(r),children:e.jsx(ce,{className:"w-4 h-4"})}),r.is_verified?e.jsx(N,{variant:"outline",size:"sm",onClick:()=>D(r.id,!1),children:e.jsx(Ne,{className:"w-4 h-4"})}):e.jsx(N,{variant:"outline",size:"sm",onClick:()=>D(r.id,!0),children:e.jsx(de,{className:"w-4 h-4"})})]})]})})},r.id)})}),e.jsx(ee,{open:v,onOpenChange:l,children:e.jsxs(se,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(te,{children:e.jsx(ae,{children:"Designer Details"})}),t&&e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Brand Name:"}),e.jsx("p",{children:t.brand_name})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Status:"}),e.jsx(L,{variant:t.is_verified?"default":"secondary",className:"ml-2",children:t.is_verified?"Verified":"Unverified"})]})]}),t.bio&&e.jsxs("div",{children:[e.jsx("strong",{children:"Bio:"}),e.jsx("p",{className:"mt-1",children:t.bio})]}),t.website_url&&e.jsxs("div",{children:[e.jsx("strong",{children:"Website:"}),e.jsx("a",{href:t.website_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline ml-2",children:t.website_url})]}),((V=t.portfolio_urls)==null?void 0:V.length)>0&&e.jsxs("div",{children:[e.jsx("strong",{children:"Portfolio:"}),e.jsx("ul",{className:"mt-1 space-y-1",children:t.portfolio_urls.map((r,d)=>e.jsx("li",{children:e.jsx("a",{href:r,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:r})},d))})]}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsxs(N,{onClick:()=>D(t.id,!t.is_verified),variant:t.is_verified?"outline":"default",children:[t.is_verified?"Unverify":"Verify"," Designer"]}),e.jsx(N,{variant:"destructive",onClick:()=>{l(!1),c(t.id)},children:"Delete Designer"})]})]})]})})]})},Ee=()=>{const[g,w]=n.useState([]),[m,y]=n.useState(!0),[t,T]=n.useState(null),[v,l]=n.useState(!1),[j,b]=n.useState(""),[h,S]=n.useState("all"),[u,k]=n.useState("all"),{toast:x}=Z(),{logAdminAction:D}=X(),c=n.useCallback(async()=>{y(!0);try{const{data:a,error:p}=await f.from("contact_forms").select("*").order("created_at",{ascending:!1});if(p)throw p;w(a||[])}catch(a){x({title:"Error fetching contacts",description:a.message,variant:"destructive"})}finally{y(!1)}},[x]);n.useEffect(()=>{c()},[c]);const _=async(a,p)=>{try{const E=g.find(i=>i.id===a),F={status:p};p==="resolved"&&(F.resolved_at=new Date().toISOString());const{data:K,error:s}=await f.from("contact_forms").update(F).eq("id",a).select().single();if(s)throw s;await D("update","contact_forms",a,E,K),x({title:"Status updated",description:`Contact status has been updated to ${p}.`}),c()}catch(E){x({title:"Error updating status",description:E.message,variant:"destructive"})}},U=a=>{T(a),l(!0)},V=g.filter(a=>{const p=a.name.toLowerCase().includes(j.toLowerCase())||a.email.toLowerCase().includes(j.toLowerCase())||a.subject.toLowerCase().includes(j.toLowerCase())||a.message.toLowerCase().includes(j.toLowerCase()),E=h==="all"||a.status===h,F=u==="all"||a.inquiry_type===u;return p&&E&&F}),r=a=>{switch(a){case"new":return"destructive";case"in_progress":return"default";case"resolved":return"secondary";default:return"outline"}},d=a=>{switch(a){case"general":return"General";case"event_inquiry":return"Event Inquiry";case"designer_application":return"Designer Application";case"partnership":return"Partnership";case"media":return"Media";case"support":return"Support";default:return a.charAt(0).toUpperCase()+a.slice(1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex flex-col md:flex-row gap-4 items-start md:items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Contact Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage and respond to contact submissions"})]})}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(re,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(z,{placeholder:"Search contacts...",value:j,onChange:a=>b(a.target.value),className:"pl-10"})]}),e.jsxs(O,{value:h,onValueChange:S,children:[e.jsx(B,{className:"w-full md:w-48",children:e.jsx(G,{placeholder:"Filter by status"})}),e.jsxs(I,{children:[e.jsx(o,{value:"all",children:"All Status"}),e.jsx(o,{value:"new",children:"New"}),e.jsx(o,{value:"in_progress",children:"In Progress"}),e.jsx(o,{value:"resolved",children:"Resolved"})]})]}),e.jsxs(O,{value:u,onValueChange:k,children:[e.jsx(B,{className:"w-full md:w-48",children:e.jsx(G,{placeholder:"Filter by type"})}),e.jsxs(I,{children:[e.jsx(o,{value:"all",children:"All Types"}),e.jsx(o,{value:"general",children:"General"}),e.jsx(o,{value:"event_inquiry",children:"Event Inquiry"}),e.jsx(o,{value:"designer_application",children:"Designer Application"}),e.jsx(o,{value:"partnership",children:"Partnership"}),e.jsx(o,{value:"media",children:"Media"}),e.jsx(o,{value:"support",children:"Support"})]})]})]}),e.jsx("div",{className:"grid gap-4",children:m?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading contacts..."})]}):V.length===0?e.jsx(C,{children:e.jsxs(A,{className:"text-center py-8",children:[e.jsx(Q,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No contacts found"}),e.jsx("p",{className:"text-muted-foreground",children:j||h!=="all"||u!=="all"?"No contacts match your current filters.":"No contact submissions have been received yet."})]})}):V.map(a=>e.jsx(C,{className:"cursor-pointer hover:shadow-md transition-shadow",children:e.jsx(q,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"space-y-1 flex-1",children:[e.jsx(R,{className:"text-lg",children:a.subject}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(we,{className:"w-4 h-4"}),a.name," (",a.email,")"]}),a.phone&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ye,{className:"w-4 h-4"}),a.phone]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(W,{className:"w-4 h-4"}),new Date(a.created_at).toLocaleDateString()]})]}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:a.message}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(L,{variant:r(a.status),children:a.status.replace("_"," ").toUpperCase()}),e.jsx(L,{variant:"outline",children:d(a.inquiry_type)})]})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[e.jsx(N,{variant:"outline",size:"sm",onClick:()=>U(a),children:e.jsx(ce,{className:"w-4 h-4"})}),a.status==="new"&&e.jsx(N,{variant:"outline",size:"sm",onClick:()=>_(a.id,"in_progress"),children:"Start Review"}),a.status==="in_progress"&&e.jsx(N,{variant:"outline",size:"sm",onClick:()=>_(a.id,"resolved"),children:e.jsx(de,{className:"w-4 h-4"})})]})]})})},a.id))}),e.jsx(ee,{open:v,onOpenChange:l,children:e.jsxs(se,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(te,{children:e.jsx(ae,{children:"Contact Details"})}),t&&e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Name:"}),e.jsx("p",{children:t.name})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Email:"}),e.jsx("p",{children:t.email})]})]}),t.phone&&e.jsxs("div",{children:[e.jsx("strong",{children:"Phone:"}),e.jsx("p",{children:t.phone})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Subject:"}),e.jsx("p",{children:t.subject})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Message:"}),e.jsx("p",{className:"whitespace-pre-wrap",children:t.message})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Type:"}),e.jsx(L,{variant:"outline",className:"ml-2",children:d(t.inquiry_type)})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Status:"}),e.jsx(L,{variant:r(t.status),className:"ml-2",children:t.status.replace("_"," ").toUpperCase()})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Submitted:"}),e.jsx("p",{children:new Date(t.created_at).toLocaleString()})]}),t.resolved_at&&e.jsxs("div",{children:[e.jsx("strong",{children:"Resolved:"}),e.jsx("p",{children:new Date(t.resolved_at).toLocaleString()})]})]}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[t.status==="new"&&e.jsx(N,{onClick:()=>{_(t.id,"in_progress"),l(!1)},children:"Start Review"}),t.status==="in_progress"&&e.jsx(N,{onClick:()=>{_(t.id,"resolved"),l(!1)},children:"Mark Resolved"}),e.jsx(N,{variant:"outline",onClick:()=>window.open(`mailto:${t.email}?subject=Re: ${t.subject}`),children:"Reply via Email"})]})]})]})})]})},Ve=()=>{const{isAdmin:g,loading:w}=X(),[m,y]=n.useState(null),[t,T]=n.useState(!0);return n.useEffect(()=>{(async()=>{if(g){T(!0);try{y({totalEvents:25,totalDesigners:48,totalContacts:156,totalUsers:2847,recentActivity:[]})}catch(l){console.error("Error fetching stats:",l)}finally{T(!1)}}})()},[g]),w?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading admin dashboard..."})]})}):g?e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("div",{className:"border-b",children:e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-playfair font-bold",children:"Admin Dashboard"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your FashionOS platform"})]}),e.jsxs(L,{variant:"secondary",className:"flex items-center gap-2",children:[e.jsx(ne,{className:"w-4 h-4"}),"Administrator"]})]})})}),e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs(oe,{defaultValue:"overview",className:"space-y-6",children:[e.jsxs(me,{className:"grid w-full grid-cols-5",children:[e.jsxs($,{value:"overview",className:"flex items-center gap-2",children:[e.jsx(be,{className:"w-4 h-4"}),"Overview"]}),e.jsxs($,{value:"events",className:"flex items-center gap-2",children:[e.jsx(W,{className:"w-4 h-4"}),"Events"]}),e.jsxs($,{value:"designers",className:"flex items-center gap-2",children:[e.jsx(ie,{className:"w-4 h-4"}),"Designers"]}),e.jsxs($,{value:"contacts",className:"flex items-center gap-2",children:[e.jsx(Q,{className:"w-4 h-4"}),"Contacts"]}),e.jsxs($,{value:"users",className:"flex items-center gap-2",children:[e.jsx(le,{className:"w-4 h-4"}),"Users"]})]}),e.jsxs(H,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(C,{children:[e.jsxs(q,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(R,{className:"text-sm font-medium",children:"Total Events"}),e.jsx(W,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(A,{children:[e.jsx("div",{className:"text-2xl font-bold",children:(m==null?void 0:m.totalEvents)||0}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.jsx(J,{className:"inline w-3 h-3 mr-1"}),"+12% from last month"]})]})]}),e.jsxs(C,{children:[e.jsxs(q,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(R,{className:"text-sm font-medium",children:"Designers"}),e.jsx(ie,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(A,{children:[e.jsx("div",{className:"text-2xl font-bold",children:(m==null?void 0:m.totalDesigners)||0}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.jsx(J,{className:"inline w-3 h-3 mr-1"}),"+8% from last month"]})]})]}),e.jsxs(C,{children:[e.jsxs(q,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(R,{className:"text-sm font-medium",children:"Contact Submissions"}),e.jsx(Q,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(A,{children:[e.jsx("div",{className:"text-2xl font-bold",children:(m==null?void 0:m.totalContacts)||0}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.jsx(J,{className:"inline w-3 h-3 mr-1"}),"+24% from last month"]})]})]}),e.jsxs(C,{children:[e.jsxs(q,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(R,{className:"text-sm font-medium",children:"Total Users"}),e.jsx(le,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(A,{children:[e.jsx("div",{className:"text-2xl font-bold",children:(m==null?void 0:m.totalUsers)||0}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.jsx(J,{className:"inline w-3 h-3 mr-1"}),"+15% from last month"]})]})]})]}),e.jsxs(C,{children:[e.jsx(q,{children:e.jsxs(R,{className:"flex items-center gap-2",children:[e.jsx(_e,{className:"w-5 h-5"}),"Recent Activity"]})}),e.jsx(A,{children:e.jsx("div",{className:"space-y-4",children:[{action:"Created new event",target:"Fashion Week 2025",time:"2 minutes ago"},{action:"Approved designer",target:"Maria Rodriguez",time:"1 hour ago"},{action:"Updated event",target:"Sustainable Fashion Summit",time:"3 hours ago"},{action:"Responded to contact",target:"John Smith inquiry",time:"5 hours ago"}].map((v,l)=>e.jsxs("div",{className:"flex items-center justify-between py-2 border-b last:border-0",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:v.action}),e.jsx("p",{className:"text-xs text-muted-foreground",children:v.target})]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:v.time})]},l))})})]})]}),e.jsx(H,{value:"events",children:e.jsx(Ce,{})}),e.jsx(H,{value:"designers",children:e.jsx(Se,{})}),e.jsx(H,{value:"contacts",children:e.jsx(Ee,{})}),e.jsx(H,{value:"users",children:e.jsxs(C,{children:[e.jsx(q,{children:e.jsx(R,{children:"User Management"})}),e.jsx(A,{children:e.jsx("p",{className:"text-muted-foreground",children:"User management features coming soon..."})})]})})]})})]}):e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx(C,{className:"w-96",children:e.jsxs(A,{className:"p-6 text-center",children:[e.jsx(ne,{className:"w-12 h-12 mx-auto mb-4 text-destructive"}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"You don't have permission to access the admin dashboard."}),e.jsx(N,{onClick:()=>window.location.href="/",variant:"outline",children:"Return to Home"})]})})})};export{Ve as default};
