import{j as e}from"./ui-vendor-CWP_eYGj.js";import{r as i}from"./react-vendor-BCzOm2YP.js";import{s as f,u as Z,a as N,I as z,S as B,e as O,f as $,g as G,h as o,C,d as A,b as M,c as V,B as L}from"./index-hD8Lc50L.js";import{T as oe,a as me,b as H,c as I}from"./tabs-BGDHWp0_.js";import{u as he}from"./clerk-dvj8YAJP.js";import{L as P}from"./label-a-1bmka7.js";import{T as xe}from"./textarea-XVdDZDZw.js";import{D as ee,a as ue,b as se,c as te,d as ae}from"./dialog-N1SO3fNO.js";import{o as je,S as re,C as W,f as fe,q as ve,ax as ge,a1 as pe,E as ce,V as Ne,z as de,j as Q,M as we,e as ye,h as ie,i as be,P as ne,U as le,T as X,A as _e}from"./utils-CgNX-I3X.js";import"./supabase-Bc-83CNV.js";const Y=()=>{const[v,w]=i.useState(!1),[m,_]=i.useState(!0),{user:t}=he();return i.useEffect(()=>{(async()=>{var d,S,h;if(window.location.hostname==="localhost"&&window.location.search.includes("dev=true")){console.log("ðŸ”§ Development mode: Granting admin access"),w(!0),_(!1);return}const y=["admin@fashionistas.one","sk@example.com","test@example.com"];if((d=t==null?void 0:t.primaryEmailAddress)!=null&&d.emailAddress&&y.includes(t.primaryEmailAddress.emailAddress)){console.log("ðŸš¨ Emergency admin access granted for:",t.primaryEmailAddress.emailAddress),w(!0),_(!1);return}if(!t){w(!1),_(!1);return}try{if(((S=t.publicMetadata)==null?void 0:S.role)==="admin"||((h=t.publicMetadata)==null?void 0:h.isAdmin)===!0)w(!0);else{const{data:j,error:D}=await f.from("user_roles").select("role").eq("user_id",t.id).eq("role","admin").maybeSingle();D?(console.error("Error checking admin status:",D),w(!1)):w(!!j)}}catch(k){console.error("Error checking admin status:",k),w(!1)}finally{_(!1)}})()},[t]),{isAdmin:v,loading:m,getAdminStats:async()=>{if(!v)return null;try{const[l,u,y,d,S]=await Promise.all([f.from("events").select("id",{count:"exact",head:!0}),f.from("designer_profiles").select("id",{count:"exact",head:!0}),f.from("contact_forms").select("id",{count:"exact",head:!0}),f.from("profiles").select("id",{count:"exact",head:!0}),f.from("audit_logs").select("*").order("created_at",{ascending:!1}).limit(10)]);return{totalEvents:l.count||0,totalDesigners:u.count||0,totalContacts:y.count||0,totalUsers:d.count||0,recentActivity:S.data||[]}}catch(l){return console.error("Error fetching admin stats:",l),null}},logAdminAction:async(l,u,y,d,S)=>{if(!(!v||!t))try{await f.from("audit_logs").insert({user_id:t.id,action:l,table_name:u,record_id:y,old_values:d,new_values:S})}catch(h){console.error("Error logging admin action:",h)}}}},Ce=()=>{const[v,w]=i.useState([]),[m,_]=i.useState([]),[t,T]=i.useState(!0),[g,l]=i.useState(null),[u,y]=i.useState(!1),[d,S]=i.useState(""),[h,k]=i.useState("all"),{toast:j}=Z(),{logAdminAction:D}=Y(),[x,b]=i.useState({event_name:"",description:"",status:"draft",start_datetime:"",end_datetime:"",venue_id:""});i.useEffect(()=>{U(),R()},[]);const U=async()=>{T(!0);try{const{data:s,error:n}=await f.from("events").select("*").order("created_at",{ascending:!1});if(n)throw n;w(s||[])}catch(s){j({title:"Error fetching events",description:s.message,variant:"destructive"})}finally{T(!1)}},R=async()=>{try{const{data:s,error:n}=await f.from("venues").select("id, venue_name, city, address").eq("status","active").order("venue_name");if(n)throw n;_(s||[])}catch(s){console.error("Error fetching venues:",s)}},r=async()=>{var s;try{const{data:n,error:q}=await f.from("events").insert([{...x,organizer_id:(s=(await f.auth.getUser()).data.user)==null?void 0:s.id}]).select().single();if(q)throw q;await D("create","events",n.id,null,n),j({title:"Event created",description:"The event has been created successfully."}),y(!1),E(),U()}catch(n){j({title:"Error creating event",description:n.message,variant:"destructive"})}},c=async()=>{if(g)try{const{data:s,error:n}=await f.from("events").update(x).eq("id",g.id).select().single();if(n)throw n;await D("update","events",g.id,g,s),j({title:"Event updated",description:"The event has been updated successfully."}),y(!1),l(null),E(),U()}catch(s){j({title:"Error updating event",description:s.message,variant:"destructive"})}},a=async s=>{if(confirm("Are you sure you want to delete this event?"))try{const n=v.find(J=>J.id===s),{error:q}=await f.from("events").delete().eq("id",s);if(q)throw q;await D("delete","events",s,n,null),j({title:"Event deleted",description:"The event has been deleted successfully."}),U()}catch(n){j({title:"Error deleting event",description:n.message,variant:"destructive"})}},p=s=>{l(s),b({event_name:s.event_name,description:s.description||"",status:s.status,start_datetime:new Date(s.start_datetime).toISOString().slice(0,16),end_datetime:new Date(s.end_datetime).toISOString().slice(0,16),venue_id:s.venue_id||""}),y(!0)},E=()=>{b({event_name:"",description:"",status:"draft",start_datetime:"",end_datetime:"",venue_id:""})},F=v.filter(s=>{var J;const n=s.event_name.toLowerCase().includes(d.toLowerCase())||((J=s.description)==null?void 0:J.toLowerCase().includes(d.toLowerCase())),q=h==="all"||s.status===h;return n&&q}),K=s=>{switch(s){case"published":return"default";case"draft":return"secondary";case"cancelled":return"destructive";default:return"outline"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-start md:items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Event Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Create and manage fashion events"})]}),e.jsxs(ee,{open:u,onOpenChange:y,children:[e.jsx(ue,{asChild:!0,children:e.jsxs(N,{onClick:()=>{E(),l(null)},children:[e.jsx(je,{className:"w-4 h-4 mr-2"}),"Create Event"]})}),e.jsxs(se,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(te,{children:e.jsx(ae,{children:g?"Edit Event":"Create New Event"})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(P,{htmlFor:"event_name",children:"Event Name"}),e.jsx(z,{id:"event_name",value:x.event_name,onChange:s=>b({...x,event_name:s.target.value}),placeholder:"Enter event name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(P,{htmlFor:"description",children:"Description"}),e.jsx(xe,{id:"description",value:x.description,onChange:s=>b({...x,description:s.target.value}),placeholder:"Enter event description",rows:4})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(P,{htmlFor:"start_datetime",children:"Start Date & Time"}),e.jsx(z,{id:"start_datetime",type:"datetime-local",value:x.start_datetime,onChange:s=>b({...x,start_datetime:s.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(P,{htmlFor:"end_datetime",children:"End Date & Time"}),e.jsx(z,{id:"end_datetime",type:"datetime-local",value:x.end_datetime,onChange:s=>b({...x,end_datetime:s.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(P,{htmlFor:"venue",children:"Venue"}),e.jsxs(B,{value:x.venue_id,onValueChange:s=>b({...x,venue_id:s}),children:[e.jsx(O,{children:e.jsx($,{placeholder:"Select venue"})}),e.jsx(G,{children:m.map(s=>e.jsxs(o,{value:s.id,children:[s.venue_name," - ",s.city]},s.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(P,{htmlFor:"status",children:"Status"}),e.jsxs(B,{value:x.status,onValueChange:s=>b({...x,status:s}),children:[e.jsx(O,{children:e.jsx($,{})}),e.jsxs(G,{children:[e.jsx(o,{value:"draft",children:"Draft"}),e.jsx(o,{value:"published",children:"Published"}),e.jsx(o,{value:"cancelled",children:"Cancelled"})]})]})]})]}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsx(N,{onClick:g?c:r,className:"flex-1",children:g?"Update Event":"Create Event"}),e.jsx(N,{variant:"outline",onClick:()=>y(!1),className:"flex-1",children:"Cancel"})]})]})]})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(re,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(z,{placeholder:"Search events...",value:d,onChange:s=>S(s.target.value),className:"pl-10"})]}),e.jsxs(B,{value:h,onValueChange:k,children:[e.jsx(O,{className:"w-full md:w-48",children:e.jsx($,{placeholder:"Filter by status"})}),e.jsxs(G,{children:[e.jsx(o,{value:"all",children:"All Status"}),e.jsx(o,{value:"draft",children:"Draft"}),e.jsx(o,{value:"published",children:"Published"}),e.jsx(o,{value:"cancelled",children:"Cancelled"})]})]})]}),e.jsx("div",{className:"grid gap-4",children:t?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading events..."})]}):F.length===0?e.jsx(C,{children:e.jsxs(A,{className:"text-center py-8",children:[e.jsx(W,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No events found"}),e.jsx("p",{className:"text-muted-foreground",children:d||h!=="all"?"No events match your current filters.":"Get started by creating your first event."})]})}):F.map(s=>{var n;return e.jsxs(C,{children:[e.jsx(M,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(V,{className:"text-lg",children:s.event_name}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(W,{className:"w-4 h-4"}),new Date(s.start_datetime).toLocaleDateString()]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(fe,{className:"w-4 h-4"}),((n=m.find(q=>q.id===s.venue_id))==null?void 0:n.venue_name)||"No venue"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{variant:K(s.status),children:s.status.charAt(0).toUpperCase()+s.status.slice(1)}),e.jsx(N,{variant:"outline",size:"sm",onClick:()=>p(s),children:e.jsx(ve,{className:"w-4 h-4"})}),e.jsx(N,{variant:"outline",size:"sm",onClick:()=>a(s.id),children:e.jsx(ge,{className:"w-4 h-4"})})]})]})}),s.description&&e.jsx(A,{children:e.jsx("p",{className:"text-muted-foreground line-clamp-2",children:s.description})})]},s.id)})})]})},Se=()=>{var R;const[v,w]=i.useState([]),[m,_]=i.useState(!0),[t,T]=i.useState(null),[g,l]=i.useState(!1),[u,y]=i.useState(""),[d,S]=i.useState("all"),{toast:h}=Z(),{logAdminAction:k}=Y();i.useEffect(()=>{j()},[]);const j=async()=>{_(!0);try{const{data:r,error:c}=await f.from("designer_profiles").select("*").order("created_at",{ascending:!1});if(c)throw c;w(r||[])}catch(r){h({title:"Error fetching designers",description:r.message,variant:"destructive"})}finally{_(!1)}},D=async(r,c)=>{try{const a=v.find(F=>F.id===r),{data:p,error:E}=await f.from("designer_profiles").update({is_verified:c}).eq("id",r).select().single();if(E)throw E;await k(c?"verify":"unverify","designer_profiles",r,a,p),h({title:`Designer ${c?"verified":"unverified"}`,description:`The designer has been ${c?"verified":"unverified"} successfully.`}),j()}catch(a){h({title:"Error updating designer",description:a.message,variant:"destructive"})}},x=async r=>{if(confirm("Are you sure you want to delete this designer profile?"))try{const c=v.find(p=>p.id===r),{error:a}=await f.from("designer_profiles").delete().eq("id",r);if(a)throw a;await k("delete","designer_profiles",r,c,null),h({title:"Designer deleted",description:"The designer profile has been deleted successfully."}),j()}catch(c){h({title:"Error deleting designer",description:c.message,variant:"destructive"})}},b=r=>{T(r),l(!0)},U=v.filter(r=>{var p;const c=r.brand_name.toLowerCase().includes(u.toLowerCase())||((p=r.bio)==null?void 0:p.toLowerCase().includes(u.toLowerCase())),a=d==="all"||d==="verified"&&r.is_verified||d==="unverified"&&!r.is_verified;return c&&a});return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex flex-col md:flex-row gap-4 items-start md:items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Designer Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Review and manage fashion designers"})]})}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(re,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(z,{placeholder:"Search designers...",value:u,onChange:r=>y(r.target.value),className:"pl-10"})]}),e.jsxs(B,{value:d,onValueChange:S,children:[e.jsx(O,{className:"w-full md:w-48",children:e.jsx($,{placeholder:"Filter by status"})}),e.jsxs(G,{children:[e.jsx(o,{value:"all",children:"All Designers"}),e.jsx(o,{value:"verified",children:"Verified"}),e.jsx(o,{value:"unverified",children:"Unverified"})]})]})]}),e.jsx("div",{className:"grid gap-4",children:m?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading designers..."})]}):U.length===0?e.jsx(C,{children:e.jsxs(A,{className:"text-center py-8",children:[e.jsx(pe,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No designers found"}),e.jsx("p",{className:"text-muted-foreground",children:u||d!=="all"?"No designers match your current filters.":"No designer profiles have been created yet."})]})}):U.map(r=>{var c;return e.jsx(C,{children:e.jsx(M,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(V,{className:"text-lg",children:r.brand_name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["@",r.brand_slug]}),r.bio&&e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:r.bio}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(L,{variant:r.is_verified?"default":"secondary",children:r.is_verified?"Verified":"Unverified"}),r.website_url&&e.jsx(L,{variant:"outline",children:"Has Website"}),((c=r.portfolio_urls)==null?void 0:c.length)>0&&e.jsxs(L,{variant:"outline",children:[r.portfolio_urls.length," Portfolio Items"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{variant:"outline",size:"sm",onClick:()=>b(r),children:e.jsx(ce,{className:"w-4 h-4"})}),r.is_verified?e.jsx(N,{variant:"outline",size:"sm",onClick:()=>D(r.id,!1),children:e.jsx(Ne,{className:"w-4 h-4"})}):e.jsx(N,{variant:"outline",size:"sm",onClick:()=>D(r.id,!0),children:e.jsx(de,{className:"w-4 h-4"})})]})]})})},r.id)})}),e.jsx(ee,{open:g,onOpenChange:l,children:e.jsxs(se,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(te,{children:e.jsx(ae,{children:"Designer Details"})}),t&&e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Brand Name:"}),e.jsx("p",{children:t.brand_name})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Status:"}),e.jsx(L,{variant:t.is_verified?"default":"secondary",className:"ml-2",children:t.is_verified?"Verified":"Unverified"})]})]}),t.bio&&e.jsxs("div",{children:[e.jsx("strong",{children:"Bio:"}),e.jsx("p",{className:"mt-1",children:t.bio})]}),t.website_url&&e.jsxs("div",{children:[e.jsx("strong",{children:"Website:"}),e.jsx("a",{href:t.website_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline ml-2",children:t.website_url})]}),((R=t.portfolio_urls)==null?void 0:R.length)>0&&e.jsxs("div",{children:[e.jsx("strong",{children:"Portfolio:"}),e.jsx("ul",{className:"mt-1 space-y-1",children:t.portfolio_urls.map((r,c)=>e.jsx("li",{children:e.jsx("a",{href:r,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:r})},c))})]}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsxs(N,{onClick:()=>D(t.id,!t.is_verified),variant:t.is_verified?"outline":"default",children:[t.is_verified?"Unverify":"Verify"," Designer"]}),e.jsx(N,{variant:"destructive",onClick:()=>{l(!1),x(t.id)},children:"Delete Designer"})]})]})]})})]})},De=()=>{const[v,w]=i.useState([]),[m,_]=i.useState(!0),[t,T]=i.useState(null),[g,l]=i.useState(!1),[u,y]=i.useState(""),[d,S]=i.useState("all"),[h,k]=i.useState("all"),{toast:j}=Z(),{logAdminAction:D}=Y(),x=i.useCallback(async()=>{_(!0);try{const{data:a,error:p}=await f.from("contact_forms").select("*").order("created_at",{ascending:!1});if(p)throw p;w(a||[])}catch(a){j({title:"Error fetching contacts",description:a.message,variant:"destructive"})}finally{_(!1)}},[j]);i.useEffect(()=>{x()},[x]);const b=async(a,p)=>{try{const E=v.find(n=>n.id===a),F={status:p};p==="resolved"&&(F.resolved_at=new Date().toISOString());const{data:K,error:s}=await f.from("contact_forms").update(F).eq("id",a).select().single();if(s)throw s;await D("update","contact_forms",a,E,K),j({title:"Status updated",description:`Contact status has been updated to ${p}.`}),x()}catch(E){j({title:"Error updating status",description:E.message,variant:"destructive"})}},U=a=>{T(a),l(!0)},R=v.filter(a=>{const p=a.name.toLowerCase().includes(u.toLowerCase())||a.email.toLowerCase().includes(u.toLowerCase())||a.subject.toLowerCase().includes(u.toLowerCase())||a.message.toLowerCase().includes(u.toLowerCase()),E=d==="all"||a.status===d,F=h==="all"||a.inquiry_type===h;return p&&E&&F}),r=a=>{switch(a){case"new":return"destructive";case"in_progress":return"default";case"resolved":return"secondary";default:return"outline"}},c=a=>{switch(a){case"general":return"General";case"event_inquiry":return"Event Inquiry";case"designer_application":return"Designer Application";case"partnership":return"Partnership";case"media":return"Media";case"support":return"Support";default:return a.charAt(0).toUpperCase()+a.slice(1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex flex-col md:flex-row gap-4 items-start md:items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Contact Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage and respond to contact submissions"})]})}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(re,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(z,{placeholder:"Search contacts...",value:u,onChange:a=>y(a.target.value),className:"pl-10"})]}),e.jsxs(B,{value:d,onValueChange:S,children:[e.jsx(O,{className:"w-full md:w-48",children:e.jsx($,{placeholder:"Filter by status"})}),e.jsxs(G,{children:[e.jsx(o,{value:"all",children:"All Status"}),e.jsx(o,{value:"new",children:"New"}),e.jsx(o,{value:"in_progress",children:"In Progress"}),e.jsx(o,{value:"resolved",children:"Resolved"})]})]}),e.jsxs(B,{value:h,onValueChange:k,children:[e.jsx(O,{className:"w-full md:w-48",children:e.jsx($,{placeholder:"Filter by type"})}),e.jsxs(G,{children:[e.jsx(o,{value:"all",children:"All Types"}),e.jsx(o,{value:"general",children:"General"}),e.jsx(o,{value:"event_inquiry",children:"Event Inquiry"}),e.jsx(o,{value:"designer_application",children:"Designer Application"}),e.jsx(o,{value:"partnership",children:"Partnership"}),e.jsx(o,{value:"media",children:"Media"}),e.jsx(o,{value:"support",children:"Support"})]})]})]}),e.jsx("div",{className:"grid gap-4",children:m?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading contacts..."})]}):R.length===0?e.jsx(C,{children:e.jsxs(A,{className:"text-center py-8",children:[e.jsx(Q,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No contacts found"}),e.jsx("p",{className:"text-muted-foreground",children:u||d!=="all"||h!=="all"?"No contacts match your current filters.":"No contact submissions have been received yet."})]})}):R.map(a=>e.jsx(C,{className:"cursor-pointer hover:shadow-md transition-shadow",children:e.jsx(M,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"space-y-1 flex-1",children:[e.jsx(V,{className:"text-lg",children:a.subject}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(we,{className:"w-4 h-4"}),a.name," (",a.email,")"]}),a.phone&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ye,{className:"w-4 h-4"}),a.phone]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(W,{className:"w-4 h-4"}),new Date(a.created_at).toLocaleDateString()]})]}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:a.message}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(L,{variant:r(a.status),children:a.status.replace("_"," ").toUpperCase()}),e.jsx(L,{variant:"outline",children:c(a.inquiry_type)})]})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[e.jsx(N,{variant:"outline",size:"sm",onClick:()=>U(a),children:e.jsx(ce,{className:"w-4 h-4"})}),a.status==="new"&&e.jsx(N,{variant:"outline",size:"sm",onClick:()=>b(a.id,"in_progress"),children:"Start Review"}),a.status==="in_progress"&&e.jsx(N,{variant:"outline",size:"sm",onClick:()=>b(a.id,"resolved"),children:e.jsx(de,{className:"w-4 h-4"})})]})]})})},a.id))}),e.jsx(ee,{open:g,onOpenChange:l,children:e.jsxs(se,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(te,{children:e.jsx(ae,{children:"Contact Details"})}),t&&e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Name:"}),e.jsx("p",{children:t.name})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Email:"}),e.jsx("p",{children:t.email})]})]}),t.phone&&e.jsxs("div",{children:[e.jsx("strong",{children:"Phone:"}),e.jsx("p",{children:t.phone})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Subject:"}),e.jsx("p",{children:t.subject})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Message:"}),e.jsx("p",{className:"whitespace-pre-wrap",children:t.message})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Type:"}),e.jsx(L,{variant:"outline",className:"ml-2",children:c(t.inquiry_type)})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Status:"}),e.jsx(L,{variant:r(t.status),className:"ml-2",children:t.status.replace("_"," ").toUpperCase()})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Submitted:"}),e.jsx("p",{children:new Date(t.created_at).toLocaleString()})]}),t.resolved_at&&e.jsxs("div",{children:[e.jsx("strong",{children:"Resolved:"}),e.jsx("p",{children:new Date(t.resolved_at).toLocaleString()})]})]}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[t.status==="new"&&e.jsx(N,{onClick:()=>{b(t.id,"in_progress"),l(!1)},children:"Start Review"}),t.status==="in_progress"&&e.jsx(N,{onClick:()=>{b(t.id,"resolved"),l(!1)},children:"Mark Resolved"}),e.jsx(N,{variant:"outline",onClick:()=>window.open(`mailto:${t.email}?subject=Re: ${t.subject}`),children:"Reply via Email"})]})]})]})})]})},Re=()=>{const{isAdmin:v,loading:w}=Y(),[m,_]=i.useState(null),[t,T]=i.useState(!0);return i.useEffect(()=>{(async()=>{if(v){T(!0);try{_({totalEvents:25,totalDesigners:48,totalContacts:156,totalUsers:2847,recentActivity:[]})}catch(l){console.error("Error fetching stats:",l)}finally{T(!1)}}})()},[v]),w?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading admin dashboard..."})]})}):v?e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("div",{className:"border-b",children:e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-playfair font-bold",children:"Admin Dashboard"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your FashionOS platform"})]}),e.jsxs(L,{variant:"secondary",className:"flex items-center gap-2",children:[e.jsx(ie,{className:"w-4 h-4"}),"Administrator"]})]})})}),e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs(oe,{defaultValue:"overview",className:"space-y-6",children:[e.jsxs(me,{className:"grid w-full grid-cols-5",children:[e.jsxs(H,{value:"overview",className:"flex items-center gap-2",children:[e.jsx(be,{className:"w-4 h-4"}),"Overview"]}),e.jsxs(H,{value:"events",className:"flex items-center gap-2",children:[e.jsx(W,{className:"w-4 h-4"}),"Events"]}),e.jsxs(H,{value:"designers",className:"flex items-center gap-2",children:[e.jsx(ne,{className:"w-4 h-4"}),"Designers"]}),e.jsxs(H,{value:"contacts",className:"flex items-center gap-2",children:[e.jsx(Q,{className:"w-4 h-4"}),"Contacts"]}),e.jsxs(H,{value:"users",className:"flex items-center gap-2",children:[e.jsx(le,{className:"w-4 h-4"}),"Users"]})]}),e.jsxs(I,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(C,{children:[e.jsxs(M,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(V,{className:"text-sm font-medium",children:"Total Events"}),e.jsx(W,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(A,{children:[e.jsx("div",{className:"text-2xl font-bold",children:(m==null?void 0:m.totalEvents)||0}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.jsx(X,{className:"inline w-3 h-3 mr-1"}),"+12% from last month"]})]})]}),e.jsxs(C,{children:[e.jsxs(M,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(V,{className:"text-sm font-medium",children:"Designers"}),e.jsx(ne,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(A,{children:[e.jsx("div",{className:"text-2xl font-bold",children:(m==null?void 0:m.totalDesigners)||0}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.jsx(X,{className:"inline w-3 h-3 mr-1"}),"+8% from last month"]})]})]}),e.jsxs(C,{children:[e.jsxs(M,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(V,{className:"text-sm font-medium",children:"Contact Submissions"}),e.jsx(Q,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(A,{children:[e.jsx("div",{className:"text-2xl font-bold",children:(m==null?void 0:m.totalContacts)||0}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.jsx(X,{className:"inline w-3 h-3 mr-1"}),"+24% from last month"]})]})]}),e.jsxs(C,{children:[e.jsxs(M,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(V,{className:"text-sm font-medium",children:"Total Users"}),e.jsx(le,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(A,{children:[e.jsx("div",{className:"text-2xl font-bold",children:(m==null?void 0:m.totalUsers)||0}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.jsx(X,{className:"inline w-3 h-3 mr-1"}),"+15% from last month"]})]})]})]}),e.jsxs(C,{children:[e.jsx(M,{children:e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(_e,{className:"w-5 h-5"}),"Recent Activity"]})}),e.jsx(A,{children:e.jsx("div",{className:"space-y-4",children:[{action:"Created new event",target:"Fashion Week 2025",time:"2 minutes ago"},{action:"Approved designer",target:"Maria Rodriguez",time:"1 hour ago"},{action:"Updated event",target:"Sustainable Fashion Summit",time:"3 hours ago"},{action:"Responded to contact",target:"John Smith inquiry",time:"5 hours ago"}].map((g,l)=>e.jsxs("div",{className:"flex items-center justify-between py-2 border-b last:border-0",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:g.action}),e.jsx("p",{className:"text-xs text-muted-foreground",children:g.target})]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:g.time})]},l))})})]})]}),e.jsx(I,{value:"events",children:e.jsx(Ce,{})}),e.jsx(I,{value:"designers",children:e.jsx(Se,{})}),e.jsx(I,{value:"contacts",children:e.jsx(De,{})}),e.jsx(I,{value:"users",children:e.jsxs(C,{children:[e.jsx(M,{children:e.jsx(V,{children:"User Management"})}),e.jsx(A,{children:e.jsx("p",{className:"text-muted-foreground",children:"User management features coming soon..."})})]})})]})})]}):e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx(C,{className:"w-96",children:e.jsxs(A,{className:"p-6 text-center",children:[e.jsx(ie,{className:"w-12 h-12 mx-auto mb-4 text-destructive"}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"You don't have permission to access the admin dashboard."}),e.jsx(N,{onClick:()=>window.location.href="/",variant:"outline",children:"Return to Home"})]})})})};export{Re as default};
