import{j as e}from"./ui-vendor-CWP_eYGj.js";import{r,f as F}from"./react-vendor-BCzOm2YP.js";import{a as P,b as B}from"./clerk-dvj8YAJP.js";import{m as v,o as _,C as y,b as w,c as C,d as S,a as j,I as u}from"./index-hD8Lc50L.js";import{z as A,N as k}from"./utils-CgNX-I3X.js";import"./supabase-Bc-83CNV.js";const G=_("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),o=r.forwardRef(({className:n,variant:t,...i},m)=>e.jsx("div",{ref:m,role:"alert",className:v(G({variant:t}),n),...i}));o.displayName="Alert";const H=r.forwardRef(({className:n,...t},i)=>e.jsx("h5",{ref:i,className:v("mb-1 font-medium leading-none tracking-tight",n),...t}));H.displayName="AlertTitle";const d=r.forwardRef(({className:n,...t},i)=>e.jsx("div",{ref:i,className:v("text-sm [&_p]:leading-relaxed",n),...t}));d.displayName="AlertDescription";function O(){const{isSignedIn:n}=P(),{signUp:t,setActive:i}=B(),m=F(),[x,V]=r.useState(""),[g,E]=r.useState(""),[f,U]=r.useState(""),[h,T]=r.useState(""),[z,D]=r.useState(!1),[b,l]=r.useState(""),[N,p]=r.useState(""),I=async()=>{var s,c;if(l(""),p(""),!t){l("SignUp not initialized");return}try{const a=await t.create({emailAddress:x,password:g,username:f});await t.prepareEmailAddressVerification({strategy:"email_code"}),D(!0),p("Verification code sent to your email!")}catch(a){console.error("Signup error:",a),l(((c=(s=a.errors)==null?void 0:s[0])==null?void 0:c.message)||"Failed to sign up")}},R=async()=>{var s,c;if(l(""),!t||!i){l("SignUp not initialized");return}try{const a=await t.attemptEmailAddressVerification({code:h});a.status==="complete"?(await i({session:a.createdSessionId}),p("Account created successfully! Redirecting..."),setTimeout(()=>m("/admin/organizer"),2e3)):l("Verification incomplete. Status: "+a.status)}catch(a){console.error("Verification error:",a),l(((c=(s=a.errors)==null?void 0:s[0])==null?void 0:c.message)||"Verification failed")}};return n?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-purple-50 to-pink-50",children:e.jsxs(y,{className:"max-w-md w-full",children:[e.jsx(w,{children:e.jsx(C,{children:"Already Signed In"})}),e.jsxs(S,{children:[e.jsxs(o,{children:[e.jsx(A,{className:"h-4 w-4"}),e.jsx(d,{children:"You are already signed in!"})]}),e.jsx(j,{onClick:()=>m("/admin/organizer"),className:"w-full mt-4",children:"Go to Dashboard"})]})]})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-purple-50 to-pink-50 py-12 px-4",children:e.jsxs(y,{className:"max-w-md w-full",children:[e.jsx(w,{children:e.jsx(C,{children:"Direct Authentication Test"})}),e.jsxs(S,{className:"space-y-4",children:[z?e.jsxs(e.Fragment,{children:[e.jsxs(o,{children:[e.jsx(k,{className:"h-4 w-4"}),e.jsx(d,{children:"Check your email for a verification code!"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Verification Code"}),e.jsx(u,{type:"text",value:h,onChange:s=>T(s.target.value),placeholder:"Enter 6-digit code"})]}),e.jsx(j,{onClick:R,className:"w-full",disabled:!h,children:"Verify Email"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Username"}),e.jsx(u,{type:"text",value:f,onChange:s=>U(s.target.value),placeholder:"Choose a username"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Email"}),e.jsx(u,{type:"email",value:x,onChange:s=>V(s.target.value),placeholder:"your@email.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Password"}),e.jsx(u,{type:"password",value:g,onChange:s=>E(s.target.value),placeholder:"Strong password"})]}),e.jsx(j,{onClick:I,className:"w-full",disabled:!x||!g||!f,children:"Sign Up"})]}),b&&e.jsxs(o,{variant:"destructive",children:[e.jsx(k,{className:"h-4 w-4"}),e.jsx(d,{children:b})]}),N&&e.jsxs(o,{className:"border-green-200 bg-green-50",children:[e.jsx(A,{className:"h-4 w-4 text-green-600"}),e.jsx(d,{className:"text-green-800",children:N})]})]})]})})}export{O as default};
